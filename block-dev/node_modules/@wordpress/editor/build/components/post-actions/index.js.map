{"version":3,"names":["_data","require","_element","_i18n","_components","_icons","_coreData","_lockUnlock","_actions","_store","_jsxRuntime","DropdownMenuV2","DropdownMenu","DropdownMenuGroupV2","DropdownMenuGroup","DropdownMenuItemV2","DropdownMenuItem","DropdownMenuItemLabelV2","DropdownMenuItemLabel","kebabCase","unlock","componentsPrivateApis","PostActions","onActionPerformed","buttonProps","isActionsMenuOpen","setIsActionsMenuOpen","useState","item","permissions","postType","useSelect","select","getCurrentPostType","getCurrentPostId","editorStore","getEditedEntityRecord","getEntityRecordPermissions","coreStore","_postType","_id","itemWithPermissions","useMemo","allActions","usePostActions","actions","filter","action","isEligible","jsx","open","trigger","Button","size","icon","moreVertical","label","__","disabled","length","accessibleWhenDisabled","className","onClick","onOpenChange","placement","children","ActionsDropdownMenuGroup","onClose","DropdownMenuItemTrigger","items","hideOnClick","RenderModal","ActionWithModal","ActionTrigger","isModalOpen","setIsModalOpen","actionTriggerProps","hideModalHeader","jsxs","Fragment","Modal","title","modalHeader","__experimentalHideHeader","onRequestClose","overlayClassName","id","focusOnMount","closeModal","map","callback"],"sources":["@wordpress/editor/src/components/post-actions/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tprivateApis as componentsPrivateApis,\n\tButton,\n\tModal,\n} from '@wordpress/components';\nimport { moreVertical } from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { usePostActions } from './actions';\nimport { store as editorStore } from '../../store';\n\nconst {\n\tDropdownMenuV2: DropdownMenu,\n\tDropdownMenuGroupV2: DropdownMenuGroup,\n\tDropdownMenuItemV2: DropdownMenuItem,\n\tDropdownMenuItemLabelV2: DropdownMenuItemLabel,\n\tkebabCase,\n} = unlock( componentsPrivateApis );\n\nexport default function PostActions( { onActionPerformed, buttonProps } ) {\n\tconst [ isActionsMenuOpen, setIsActionsMenuOpen ] = useState( false );\n\tconst { item, permissions, postType } = useSelect( ( select ) => {\n\t\tconst { getCurrentPostType, getCurrentPostId } = select( editorStore );\n\t\tconst { getEditedEntityRecord, getEntityRecordPermissions } = unlock(\n\t\t\tselect( coreStore )\n\t\t);\n\t\tconst _postType = getCurrentPostType();\n\t\tconst _id = getCurrentPostId();\n\t\treturn {\n\t\t\titem: getEditedEntityRecord( 'postType', _postType, _id ),\n\t\t\tpermissions: getEntityRecordPermissions(\n\t\t\t\t'postType',\n\t\t\t\t_postType,\n\t\t\t\t_id\n\t\t\t),\n\t\t\tpostType: _postType,\n\t\t};\n\t}, [] );\n\tconst itemWithPermissions = useMemo( () => {\n\t\treturn {\n\t\t\t...item,\n\t\t\tpermissions,\n\t\t};\n\t}, [ item, permissions ] );\n\tconst allActions = usePostActions( { postType, onActionPerformed } );\n\n\tconst actions = useMemo( () => {\n\t\treturn allActions.filter( ( action ) => {\n\t\t\treturn (\n\t\t\t\t! action.isEligible || action.isEligible( itemWithPermissions )\n\t\t\t);\n\t\t} );\n\t}, [ allActions, itemWithPermissions ] );\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\topen={ isActionsMenuOpen }\n\t\t\ttrigger={\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\tlabel={ __( 'Actions' ) }\n\t\t\t\t\tdisabled={ ! actions.length }\n\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\tclassName=\"editor-all-actions-button\"\n\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\tsetIsActionsMenuOpen( ! isActionsMenuOpen )\n\t\t\t\t\t}\n\t\t\t\t\t{ ...buttonProps }\n\t\t\t\t/>\n\t\t\t}\n\t\t\tonOpenChange={ setIsActionsMenuOpen }\n\t\t\tplacement=\"bottom-end\"\n\t\t>\n\t\t\t<ActionsDropdownMenuGroup\n\t\t\t\tactions={ actions }\n\t\t\t\titem={ itemWithPermissions }\n\t\t\t\tonClose={ () => {\n\t\t\t\t\tsetIsActionsMenuOpen( false );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</DropdownMenu>\n\t);\n}\n\n// From now on all the functions on this file are copied as from the dataviews packages,\n// The editor packages should not be using the dataviews packages directly,\n// and the dataviews package should not be using the editor packages directly,\n// so duplicating the code here seems like the least bad option.\n\n// Copied as is from packages/dataviews/src/item-actions.js\nfunction DropdownMenuItemTrigger( { action, onClick, items } ) {\n\tconst label =\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\n\treturn (\n\t\t<DropdownMenuItem\n\t\t\tonClick={ onClick }\n\t\t\thideOnClick={ ! action.RenderModal }\n\t\t>\n\t\t\t<DropdownMenuItemLabel>{ label }</DropdownMenuItemLabel>\n\t\t</DropdownMenuItem>\n\t);\n}\n\n// Copied as is from packages/dataviews/src/item-actions.js\n// With an added onClose prop.\nfunction ActionWithModal( { action, item, ActionTrigger, onClose } ) {\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\n\tconst actionTriggerProps = {\n\t\taction,\n\t\tonClick: () => setIsModalOpen( true ),\n\t\titems: [ item ],\n\t};\n\tconst { RenderModal, hideModalHeader } = action;\n\treturn (\n\t\t<>\n\t\t\t<ActionTrigger { ...actionTriggerProps } />\n\t\t\t{ isModalOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={ action.modalHeader || action.label }\n\t\t\t\t\t__experimentalHideHeader={ !! hideModalHeader }\n\t\t\t\t\tonRequestClose={ () => {\n\t\t\t\t\t\tsetIsModalOpen( false );\n\t\t\t\t\t} }\n\t\t\t\t\toverlayClassName={ `editor-action-modal editor-action-modal__${ kebabCase(\n\t\t\t\t\t\taction.id\n\t\t\t\t\t) }` }\n\t\t\t\t\tfocusOnMount=\"firstContentElement\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t>\n\t\t\t\t\t<RenderModal\n\t\t\t\t\t\titems={ [ item ] }\n\t\t\t\t\t\tcloseModal={ () => {\n\t\t\t\t\t\t\tsetIsModalOpen( false );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n// Copied as is from packages/dataviews/src/item-actions.js\n// With an added onClose prop.\nfunction ActionsDropdownMenuGroup( { actions, item, onClose } ) {\n\treturn (\n\t\t<DropdownMenuGroup>\n\t\t\t{ actions.map( ( action ) => {\n\t\t\t\tif ( action.RenderModal ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ActionWithModal\n\t\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tActionTrigger={ DropdownMenuItemTrigger }\n\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<DropdownMenuItemTrigger\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\tonClick={ () => action.callback( [ item ] ) }\n\t\t\t\t\t\titems={ [ item ] }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</DropdownMenuGroup>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}