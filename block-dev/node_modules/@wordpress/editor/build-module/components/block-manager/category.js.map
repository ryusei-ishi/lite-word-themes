{"version":3,"names":["useMemo","useCallback","useDispatch","useSelect","useInstanceId","CheckboxControl","store","preferencesStore","BlockTypesChecklist","editorStore","unlock","jsx","_jsx","jsxs","_jsxs","BlockManagerCategory","title","blockTypes","instanceId","allowedBlockTypes","hiddenBlockTypes","select","getEditorSettings","get","filteredBlockTypes","filter","name","includes","showBlockTypes","hideBlockTypes","toggleVisible","blockName","nextIsChecked","toggleAllVisible","blockNames","map","length","checkedBlockNames","type","titleId","isAllChecked","isIndeterminate","role","className","children","__nextHasNoMarginBottom","checked","onChange","indeterminate","label","id","value","onItemChange"],"sources":["@wordpress/editor/src/components/block-manager/category.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMemo, useCallback } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useInstanceId } from '@wordpress/compose';\nimport { CheckboxControl } from '@wordpress/components';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesChecklist from './checklist';\nimport { store as editorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction BlockManagerCategory( { title, blockTypes } ) {\n\tconst instanceId = useInstanceId( BlockManagerCategory );\n\tconst { allowedBlockTypes, hiddenBlockTypes } = useSelect( ( select ) => {\n\t\tconst { getEditorSettings } = select( editorStore );\n\t\tconst { get } = select( preferencesStore );\n\t\treturn {\n\t\t\tallowedBlockTypes: getEditorSettings().allowedBlockTypes,\n\t\t\thiddenBlockTypes: get( 'core', 'hiddenBlockTypes' ),\n\t\t};\n\t}, [] );\n\tconst filteredBlockTypes = useMemo( () => {\n\t\tif ( allowedBlockTypes === true ) {\n\t\t\treturn blockTypes;\n\t\t}\n\t\treturn blockTypes.filter( ( { name } ) => {\n\t\t\treturn allowedBlockTypes?.includes( name );\n\t\t} );\n\t}, [ allowedBlockTypes, blockTypes ] );\n\tconst { showBlockTypes, hideBlockTypes } = unlock(\n\t\tuseDispatch( editorStore )\n\t);\n\tconst toggleVisible = useCallback(\n\t\t( blockName, nextIsChecked ) => {\n\t\t\tif ( nextIsChecked ) {\n\t\t\t\tshowBlockTypes( blockName );\n\t\t\t} else {\n\t\t\t\thideBlockTypes( blockName );\n\t\t\t}\n\t\t},\n\t\t[ showBlockTypes, hideBlockTypes ]\n\t);\n\tconst toggleAllVisible = useCallback(\n\t\t( nextIsChecked ) => {\n\t\t\tconst blockNames = blockTypes.map( ( { name } ) => name );\n\t\t\tif ( nextIsChecked ) {\n\t\t\t\tshowBlockTypes( blockNames );\n\t\t\t} else {\n\t\t\t\thideBlockTypes( blockNames );\n\t\t\t}\n\t\t},\n\t\t[ blockTypes, showBlockTypes, hideBlockTypes ]\n\t);\n\n\tif ( ! filteredBlockTypes.length ) {\n\t\treturn null;\n\t}\n\n\tconst checkedBlockNames = filteredBlockTypes\n\t\t.map( ( { name } ) => name )\n\t\t.filter( ( type ) => ! ( hiddenBlockTypes ?? [] ).includes( type ) );\n\n\tconst titleId = 'editor-block-manager__category-title-' + instanceId;\n\n\tconst isAllChecked = checkedBlockNames.length === filteredBlockTypes.length;\n\tconst isIndeterminate = ! isAllChecked && checkedBlockNames.length > 0;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"group\"\n\t\t\taria-labelledby={ titleId }\n\t\t\tclassName=\"editor-block-manager__category\"\n\t\t>\n\t\t\t<CheckboxControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tchecked={ isAllChecked }\n\t\t\t\tonChange={ toggleAllVisible }\n\t\t\t\tclassName=\"editor-block-manager__category-title\"\n\t\t\t\tindeterminate={ isIndeterminate }\n\t\t\t\tlabel={ <span id={ titleId }>{ title }</span> }\n\t\t\t/>\n\t\t\t<BlockTypesChecklist\n\t\t\t\tblockTypes={ filteredBlockTypes }\n\t\t\t\tvalue={ checkedBlockNames }\n\t\t\t\tonItemChange={ toggleVisible }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default BlockManagerCategory;\n"],"mappings":"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","ignoreList":[]}