{"version":3,"names":["__","useState","VisuallyHidden","__experimentalConfirmDialog","ConfirmDialog","useInstanceId","useSelect","useDispatch","__experimentalInspectorPopoverHeader","InspectorPopoverHeader","visibilityOptions","store","editorStore","jsx","_jsx","jsxs","_jsxs","PostVisibility","onClose","instanceId","status","visibility","password","select","getEditedPostAttribute","getEditedPostVisibility","editPost","savePost","hasPassword","setHasPassword","showPrivateConfirmDialog","setShowPrivateConfirmDialog","setPublic","setPrivate","confirmPrivate","handleDialogCancel","setPasswordProtected","updatePassword","event","target","value","className","children","title","help","as","PostVisibilityChoice","label","public","info","checked","onChange","private","htmlFor","id","type","placeholder","isOpen","onConfirm","onCancel","confirmButtonText","size","props","name"],"sources":["@wordpress/editor/src/components/post-visibility/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { visibilityOptions } from './utils';\nimport { store as editorStore } from '../../store';\n\n/**\n * Allows users to set the visibility of a post.\n *\n * @param {Object}   props         The component props.\n * @param {Function} props.onClose Function to call when the popover is closed.\n * @return {JSX.Element} The rendered component.\n */\nexport default function PostVisibility( { onClose } ) {\n\tconst instanceId = useInstanceId( PostVisibility );\n\n\tconst { status, visibility, password } = useSelect( ( select ) => ( {\n\t\tstatus: select( editorStore ).getEditedPostAttribute( 'status' ),\n\t\tvisibility: select( editorStore ).getEditedPostVisibility(),\n\t\tpassword: select( editorStore ).getEditedPostAttribute( 'password' ),\n\t} ) );\n\n\tconst { editPost, savePost } = useDispatch( editorStore );\n\n\tconst [ hasPassword, setHasPassword ] = useState( !! password );\n\tconst [ showPrivateConfirmDialog, setShowPrivateConfirmDialog ] =\n\t\tuseState( false );\n\n\tconst setPublic = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: '',\n\t\t} );\n\t\tsetHasPassword( false );\n\t};\n\n\tconst setPrivate = () => {\n\t\tsetShowPrivateConfirmDialog( true );\n\t};\n\n\tconst confirmPrivate = () => {\n\t\teditPost( { status: 'private', password: '' } );\n\t\tsetHasPassword( false );\n\t\tsetShowPrivateConfirmDialog( false );\n\t\tsavePost();\n\t};\n\n\tconst handleDialogCancel = () => {\n\t\tsetShowPrivateConfirmDialog( false );\n\t};\n\n\tconst setPasswordProtected = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: password || '',\n\t\t} );\n\t\tsetHasPassword( true );\n\t};\n\n\tconst updatePassword = ( event ) => {\n\t\teditPost( { password: event.target.value } );\n\t};\n\n\treturn (\n\t\t<div className=\"editor-post-visibility\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Visibility' ) }\n\t\t\t\thelp={ __( 'Control how this post is viewed.' ) }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<fieldset className=\"editor-post-visibility__fieldset\">\n\t\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t\t{ __( 'Visibility' ) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"public\"\n\t\t\t\t\tlabel={ visibilityOptions.public.label }\n\t\t\t\t\tinfo={ visibilityOptions.public.info }\n\t\t\t\t\tchecked={ visibility === 'public' && ! hasPassword }\n\t\t\t\t\tonChange={ setPublic }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"private\"\n\t\t\t\t\tlabel={ visibilityOptions.private.label }\n\t\t\t\t\tinfo={ visibilityOptions.private.info }\n\t\t\t\t\tchecked={ visibility === 'private' }\n\t\t\t\t\tonChange={ setPrivate }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"password\"\n\t\t\t\t\tlabel={ visibilityOptions.password.label }\n\t\t\t\t\tinfo={ visibilityOptions.password.info }\n\t\t\t\t\tchecked={ hasPassword }\n\t\t\t\t\tonChange={ setPasswordProtected }\n\t\t\t\t/>\n\t\t\t\t{ hasPassword && (\n\t\t\t\t\t<div className=\"editor-post-visibility__password\">\n\t\t\t\t\t\t<VisuallyHidden\n\t\t\t\t\t\t\tas=\"label\"\n\t\t\t\t\t\t\thtmlFor={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create password' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__password-input\"\n\t\t\t\t\t\t\tid={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={ updatePassword }\n\t\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\t\tplaceholder={ __( 'Use a secure password' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showPrivateConfirmDialog }\n\t\t\t\tonConfirm={ confirmPrivate }\n\t\t\t\tonCancel={ handleDialogCancel }\n\t\t\t\tconfirmButtonText={ __( 'Publish' ) }\n\t\t\t\tsize=\"medium\"\n\t\t\t>\n\t\t\t\t{ __( 'Would you like to privately publish this post now?' ) }\n\t\t\t</ConfirmDialog>\n\t\t</div>\n\t);\n}\n\nfunction PostVisibilityChoice( { instanceId, value, label, info, ...props } ) {\n\treturn (\n\t\t<div className=\"editor-post-visibility__choice\">\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tname={ `editor-post-visibility__setting-${ instanceId }` }\n\t\t\t\tvalue={ value }\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\taria-describedby={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__radio\"\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t<label\n\t\t\t\thtmlFor={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\tclassName=\"editor-post-visibility__label\"\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</label>\n\t\t\t<p\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__info\"\n\t\t\t>\n\t\t\t\t{ info }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}