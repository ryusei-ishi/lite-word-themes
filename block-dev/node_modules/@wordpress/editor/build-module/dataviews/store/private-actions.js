/**
 * WordPress dependencies
 */
import { store as coreStore } from '@wordpress/core-data';
import { doAction } from '@wordpress/hooks';

/**
 * Internal dependencies
 */
import deletePost from '../actions/delete-post';
import exportPattern from '../actions/export-pattern';
import resetPost from '../actions/reset-post';
import trashPost from '../actions/trash-post';
import permanentlyDeletePost from '../actions/permanently-delete-post';
import restorePost from '../actions/restore-post';
import { store as editorStore } from '../../store';
import { unlock } from '../../lock-unlock';
export function registerEntityAction(kind, name, config) {
  return {
    type: 'REGISTER_ENTITY_ACTION',
    kind,
    name,
    config
  };
}
export function unregisterEntityAction(kind, name, actionId) {
  return {
    type: 'UNREGISTER_ENTITY_ACTION',
    kind,
    name,
    actionId
  };
}
export function setIsReady(kind, name) {
  return {
    type: 'SET_IS_READY',
    kind,
    name
  };
}
export const registerPostTypeActions = postType => async ({
  registry
}) => {
  const isReady = unlock(registry.select(editorStore)).isEntityReady('postType', postType);
  if (isReady) {
    return;
  }
  unlock(registry.dispatch(editorStore)).setIsReady('postType', postType);
  const postTypeConfig = await registry.resolveSelect(coreStore).getPostType(postType);
  const actions = [postTypeConfig.slug === 'wp_block' ? exportPattern : undefined, resetPost, restorePost, deletePost, trashPost, permanentlyDeletePost];
  registry.batch(() => {
    actions.forEach(action => {
      if (action === undefined) {
        return;
      }
      unlock(registry.dispatch(editorStore)).registerEntityAction('postType', postType, action);
    });
  });
  doAction('core.registerPostTypeActions', postType);
};
//# sourceMappingURL=private-actions.js.map