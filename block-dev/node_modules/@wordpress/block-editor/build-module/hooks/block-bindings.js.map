{"version":3,"names":["__","privateApis","blocksPrivateApis","__experimentalItemGroup","ItemGroup","__experimentalItem","Item","__experimentalText","Text","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","__experimentalTruncate","Truncate","__experimentalVStack","VStack","componentsPrivateApis","useSelect","useDispatch","useRegistry","useContext","Fragment","useViewportMatch","canBindAttribute","getBindableAttributes","store","blockEditorStore","unlock","InspectorControls","BlockContext","jsx","_jsx","jsxs","_jsxs","_Fragment","DropdownMenuV2","DropdownMenu","DropdownMenuGroupV2","DropdownMenuGroup","DropdownMenuRadioItemV2","DropdownMenuRadioItem","DropdownMenuItemLabelV2","DropdownMenuItemLabel","DropdownMenuItemHelpTextV2","DropdownMenuItemHelpText","DropdownMenuSeparatorV2","DropdownMenuSeparator","useToolsPanelDropdownMenuProps","isMobile","popoverProps","placement","offset","BlockBindingsPanelDropdown","fieldsList","addConnection","attribute","binding","currentKey","args","key","children","Object","entries","map","label","fields","i","keys","length","className","upperCase","variant","value","onChange","name","checked","BlockBindingsAttribute","source","sourceName","sourceProps","getBlockBindingsSource","ReadOnlyBlockBindingsPanelItems","bindings","EditableBlockBindingsPanelItems","attributes","removeConnection","hasValue","onDeselect","gutter","trigger","BlockBindingsPanel","metadata","registry","blockContext","bindableAttributes","dropdownMenuProps","filteredBindings","forEach","updateBlockAttributes","_id","select","getSelectedBlockClientId","removeAllConnections","newMetadata","undefined","getBlockBindingsSources","registeredSources","values","getFieldsList","usesContext","context","sourceList","readOnly","window","__experimentalBlockBindingsUI","resetAll","isBordered","isSeparated","edit","attributeKeys","hasSupport"],"sources":["@wordpress/block-editor/src/hooks/block-bindings.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { privateApis as blocksPrivateApis } from '@wordpress/blocks';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalText as Text,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalTruncate as Truncate,\n\t__experimentalVStack as VStack,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useSelect, useDispatch, useRegistry } from '@wordpress/data';\nimport { useContext, Fragment } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tcanBindAttribute,\n\tgetBindableAttributes,\n} from '../hooks/use-bindings-attributes';\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\nimport InspectorControls from '../components/inspector-controls';\nimport BlockContext from '../components/block-context';\n\nconst {\n\tDropdownMenuV2: DropdownMenu,\n\tDropdownMenuGroupV2: DropdownMenuGroup,\n\tDropdownMenuRadioItemV2: DropdownMenuRadioItem,\n\tDropdownMenuItemLabelV2: DropdownMenuItemLabel,\n\tDropdownMenuItemHelpTextV2: DropdownMenuItemHelpText,\n\tDropdownMenuSeparatorV2: DropdownMenuSeparator,\n} = unlock( componentsPrivateApis );\n\nconst useToolsPanelDropdownMenuProps = () => {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn ! isMobile\n\t\t? {\n\t\t\t\tpopoverProps: {\n\t\t\t\t\tplacement: 'left-start',\n\t\t\t\t\t// For non-mobile, inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\n\t\t\t\t\toffset: 259,\n\t\t\t\t},\n\t\t  }\n\t\t: {};\n};\n\nfunction BlockBindingsPanelDropdown( {\n\tfieldsList,\n\taddConnection,\n\tattribute,\n\tbinding,\n} ) {\n\tconst currentKey = binding?.args?.key;\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( fieldsList ).map( ( [ label, fields ], i ) => (\n\t\t\t\t<Fragment key={ label }>\n\t\t\t\t\t<DropdownMenuGroup>\n\t\t\t\t\t\t{ Object.keys( fieldsList ).length > 1 && (\n\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\tclassName=\"block-editor-bindings__source-label\"\n\t\t\t\t\t\t\t\tupperCase\n\t\t\t\t\t\t\t\tvariant=\"muted\"\n\t\t\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ Object.entries( fields ).map( ( [ key, value ] ) => (\n\t\t\t\t\t\t\t<DropdownMenuRadioItem\n\t\t\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\taddConnection( key, attribute )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tname={ attribute + '-binding' }\n\t\t\t\t\t\t\t\tvalue={ key }\n\t\t\t\t\t\t\t\tchecked={ key === currentKey }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DropdownMenuItemLabel>\n\t\t\t\t\t\t\t\t\t{ key }\n\t\t\t\t\t\t\t\t</DropdownMenuItemLabel>\n\t\t\t\t\t\t\t\t<DropdownMenuItemHelpText>\n\t\t\t\t\t\t\t\t\t{ value }\n\t\t\t\t\t\t\t\t</DropdownMenuItemHelpText>\n\t\t\t\t\t\t\t</DropdownMenuRadioItem>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</DropdownMenuGroup>\n\t\t\t\t\t{ i !== Object.keys( fieldsList ).length - 1 && (\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction BlockBindingsAttribute( { attribute, binding } ) {\n\tconst { source: sourceName, args } = binding || {};\n\tconst sourceProps =\n\t\tunlock( blocksPrivateApis ).getBlockBindingsSource( sourceName );\n\treturn (\n\t\t<VStack>\n\t\t\t<Truncate>{ attribute }</Truncate>\n\t\t\t{ !! binding && (\n\t\t\t\t<Text\n\t\t\t\t\tvariant=\"muted\"\n\t\t\t\t\tclassName=\"block-editor-bindings__item-explanation\"\n\t\t\t\t>\n\t\t\t\t\t<Truncate>\n\t\t\t\t\t\t{ args?.key || sourceProps?.label || sourceName }\n\t\t\t\t\t</Truncate>\n\t\t\t\t</Text>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nfunction ReadOnlyBlockBindingsPanelItems( { bindings } ) {\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( bindings ).map( ( [ attribute, binding ] ) => (\n\t\t\t\t<Item key={ attribute }>\n\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t/>\n\t\t\t\t</Item>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction EditableBlockBindingsPanelItems( {\n\tattributes,\n\tbindings,\n\tfieldsList,\n\taddConnection,\n\tremoveConnection,\n} ) {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn (\n\t\t<>\n\t\t\t{ attributes.map( ( attribute ) => {\n\t\t\t\tconst binding = bindings[ attribute ];\n\t\t\t\treturn (\n\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\tkey={ attribute }\n\t\t\t\t\t\thasValue={ () => !! binding }\n\t\t\t\t\t\tlabel={ attribute }\n\t\t\t\t\t\tonDeselect={ () => {\n\t\t\t\t\t\t\tremoveConnection( attribute );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\tplacement={\n\t\t\t\t\t\t\t\tisMobile ? 'bottom-start' : 'left-start'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgutter={ isMobile ? 8 : 36 }\n\t\t\t\t\t\t\tclassName=\"block-editor-bindings__popover\"\n\t\t\t\t\t\t\ttrigger={\n\t\t\t\t\t\t\t\t<Item>\n\t\t\t\t\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockBindingsPanelDropdown\n\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\t\taddConnection={ addConnection }\n\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n\nexport const BlockBindingsPanel = ( { name, metadata } ) => {\n\tconst registry = useRegistry();\n\tconst blockContext = useContext( BlockContext );\n\tconst { bindings } = metadata || {};\n\n\tconst bindableAttributes = getBindableAttributes( name );\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\n\tconst filteredBindings = { ...bindings };\n\tObject.keys( filteredBindings ).forEach( ( key ) => {\n\t\tif (\n\t\t\t! canBindAttribute( name, key ) ||\n\t\t\tfilteredBindings[ key ].source === 'core/pattern-overrides'\n\t\t) {\n\t\t\tdelete filteredBindings[ key ];\n\t\t}\n\t} );\n\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\tconst { _id } = useSelect( ( select ) => {\n\t\tconst { getSelectedBlockClientId } = select( blockEditorStore );\n\n\t\treturn {\n\t\t\t_id: getSelectedBlockClientId(),\n\t\t};\n\t}, [] );\n\n\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst removeAllConnections = () => {\n\t\tconst newMetadata = { ...metadata };\n\t\tdelete newMetadata.bindings;\n\t\tupdateBlockAttributes( _id, {\n\t\t\tmetadata:\n\t\t\t\tObject.keys( newMetadata ).length === 0\n\t\t\t\t\t? undefined\n\t\t\t\t\t: newMetadata,\n\t\t} );\n\t};\n\n\tconst addConnection = ( value, attribute ) => {\n\t\t// Assuming the block expects a flat structure for its metadata attribute\n\t\tconst newMetadata = {\n\t\t\t...metadata,\n\t\t\t// Adjust this according to the actual structure expected by your block\n\t\t\tbindings: {\n\t\t\t\t...metadata?.bindings,\n\t\t\t\t[ attribute ]: {\n\t\t\t\t\tsource: 'core/post-meta',\n\t\t\t\t\targs: { key: value },\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\t// Update the block's attributes with the new metadata\n\t\tupdateBlockAttributes( _id, {\n\t\t\tmetadata: newMetadata,\n\t\t} );\n\t};\n\n\tconst removeConnection = ( key ) => {\n\t\tconst newMetadata = { ...metadata };\n\t\tif ( ! newMetadata.bindings ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdelete newMetadata.bindings[ key ];\n\t\tif ( Object.keys( newMetadata.bindings ).length === 0 ) {\n\t\t\tdelete newMetadata.bindings;\n\t\t}\n\t\tupdateBlockAttributes( _id, {\n\t\t\tmetadata:\n\t\t\t\tObject.keys( newMetadata ).length === 0\n\t\t\t\t\t? undefined\n\t\t\t\t\t: newMetadata,\n\t\t} );\n\t};\n\n\tconst fieldsList = {};\n\tconst { getBlockBindingsSources } = unlock( blocksPrivateApis );\n\tconst registeredSources = getBlockBindingsSources();\n\tObject.values( registeredSources ).forEach(\n\t\t( { getFieldsList, label, usesContext } ) => {\n\t\t\tif ( getFieldsList ) {\n\t\t\t\t// Populate context.\n\t\t\t\tconst context = {};\n\t\t\t\tif ( usesContext?.length ) {\n\t\t\t\t\tfor ( const key of usesContext ) {\n\t\t\t\t\t\tcontext[ key ] = blockContext[ key ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst sourceList = getFieldsList( {\n\t\t\t\t\tregistry,\n\t\t\t\t\tcontext,\n\t\t\t\t} );\n\t\t\t\t// Only add source if the list is not empty.\n\t\t\t\tif ( sourceList ) {\n\t\t\t\t\tfieldsList[ label ] = { ...sourceList };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t);\n\t// Remove empty sources.\n\tObject.entries( fieldsList ).forEach( ( [ key, value ] ) => {\n\t\tif ( ! Object.keys( value ).length ) {\n\t\t\tdelete fieldsList[ key ];\n\t\t}\n\t} );\n\n\t// Lock the UI when the experiment is not enabled or there are no fields to connect to.\n\tconst readOnly =\n\t\t! window.__experimentalBlockBindingsUI ||\n\t\t! Object.keys( fieldsList ).length;\n\n\tif ( readOnly && Object.keys( filteredBindings ).length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<InspectorControls>\n\t\t\t<ToolsPanel\n\t\t\t\tlabel={ __( 'Attributes' ) }\n\t\t\t\tresetAll={ () => {\n\t\t\t\t\tremoveAllConnections();\n\t\t\t\t} }\n\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t\tclassName=\"block-editor-bindings__panel\"\n\t\t\t>\n\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t{ readOnly ? (\n\t\t\t\t\t\t<ReadOnlyBlockBindingsPanelItems\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EditableBlockBindingsPanelItems\n\t\t\t\t\t\t\tattributes={ bindableAttributes }\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\taddConnection={ addConnection }\n\t\t\t\t\t\t\tremoveConnection={ removeConnection }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ItemGroup>\n\t\t\t\t<Text variant=\"muted\">\n\t\t\t\t\t{ __( 'Attributes connected to various sources.' ) }\n\t\t\t\t</Text>\n\t\t\t</ToolsPanel>\n\t\t</InspectorControls>\n\t);\n};\n\nexport default {\n\tedit: BlockBindingsPanel,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n"],"mappings":"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","ignoreList":[]}