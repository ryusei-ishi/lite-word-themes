{"version":3,"names":["_components","require","_element","_i18n","_jsxRuntime","sort","valueA","valueB","direction","localeCompare","isValid","value","context","elements","validValues","map","f","includes","Edit","data","field","onChange","hideLabelFromVision","id","label","placeholder","getValue","item","onChangeControl","useCallback","newValue","prevItem","__","jsx","SelectControl","options","__next40pxDefaultSize","__nextHasNoMarginBottom","TextControl","_default","exports","default"],"sources":["@wordpress/dataviews/src/field-types/text.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { SelectControl, TextControl } from '@wordpress/components';\nimport { useCallback } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport type {\n\tSortDirection,\n\tValidationContext,\n\tDataFormControlProps,\n} from '../types';\n\nfunction sort( valueA: any, valueB: any, direction: SortDirection ) {\n\treturn direction === 'asc'\n\t\t? valueA.localeCompare( valueB )\n\t\t: valueB.localeCompare( valueA );\n}\n\nfunction isValid( value: any, context?: ValidationContext ) {\n\tif ( context?.elements ) {\n\t\tconst validValues = context?.elements?.map( ( f ) => f.value );\n\t\tif ( ! validValues.includes( value ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction Edit< Item >( {\n\tdata,\n\tfield,\n\tonChange,\n\thideLabelFromVision,\n}: DataFormControlProps< Item > ) {\n\tconst { id, label, placeholder } = field;\n\tconst value = field.getValue( { item: data } );\n\n\tconst onChangeControl = useCallback(\n\t\t( newValue: string ) =>\n\t\t\tonChange( ( prevItem: Item ) => ( {\n\t\t\t\t...prevItem,\n\t\t\t\t[ id ]: newValue,\n\t\t\t} ) ),\n\t\t[ id, onChange ]\n\t);\n\n\tif ( field.elements ) {\n\t\tconst elements = [\n\t\t\t/*\n\t\t\t * Value can be undefined when:\n\t\t\t *\n\t\t\t * - the field is not required\n\t\t\t * - in bulk editing\n\t\t\t *\n\t\t\t */\n\t\t\t{ label: __( 'Select item' ), value: '' },\n\t\t\t...field.elements,\n\t\t];\n\n\t\treturn (\n\t\t\t<SelectControl\n\t\t\t\tlabel={ label }\n\t\t\t\tvalue={ value }\n\t\t\t\toptions={ elements }\n\t\t\t\tonChange={ onChangeControl }\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\thideLabelFromVision={ hideLabelFromVision }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<TextControl\n\t\t\tlabel={ label }\n\t\t\tplaceholder={ placeholder }\n\t\t\tvalue={ value ?? '' }\n\t\t\tonChange={ onChangeControl }\n\t\t\t__next40pxDefaultSize\n\t\t\t__nextHasNoMarginBottom\n\t\t\thideLabelFromVision={ hideLabelFromVision }\n\t\t/>\n\t);\n}\n\nexport default {\n\tsort,\n\tisValid,\n\tEdit,\n};\n"],"mappings":";;;;;;AAGA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAAqC,IAAAG,WAAA,GAAAH,OAAA;AALrC;AACA;AACA;;AAKA;AACA;AACA;;AAOA,SAASI,IAAIA,CAAEC,MAAW,EAAEC,MAAW,EAAEC,SAAwB,EAAG;EACnE,OAAOA,SAAS,KAAK,KAAK,GACvBF,MAAM,CAACG,aAAa,CAAEF,MAAO,CAAC,GAC9BA,MAAM,CAACE,aAAa,CAAEH,MAAO,CAAC;AAClC;AAEA,SAASI,OAAOA,CAAEC,KAAU,EAAEC,OAA2B,EAAG;EAC3D,IAAKA,OAAO,EAAEC,QAAQ,EAAG;IACxB,MAAMC,WAAW,GAAGF,OAAO,EAAEC,QAAQ,EAAEE,GAAG,CAAIC,CAAC,IAAMA,CAAC,CAACL,KAAM,CAAC;IAC9D,IAAK,CAAEG,WAAW,CAACG,QAAQ,CAAEN,KAAM,CAAC,EAAG;MACtC,OAAO,KAAK;IACb;EACD;EAEA,OAAO,IAAI;AACZ;AAEA,SAASO,IAAIA,CAAU;EACtBC,IAAI;EACJC,KAAK;EACLC,QAAQ;EACRC;AAC6B,CAAC,EAAG;EACjC,MAAM;IAAEC,EAAE;IAAEC,KAAK;IAAEC;EAAY,CAAC,GAAGL,KAAK;EACxC,MAAMT,KAAK,GAAGS,KAAK,CAACM,QAAQ,CAAE;IAAEC,IAAI,EAAER;EAAK,CAAE,CAAC;EAE9C,MAAMS,eAAe,GAAG,IAAAC,oBAAW,EAChCC,QAAgB,IACjBT,QAAQ,CAAIU,QAAc,KAAQ;IACjC,GAAGA,QAAQ;IACX,CAAER,EAAE,GAAIO;EACT,CAAC,CAAG,CAAC,EACN,CAAEP,EAAE,EAAEF,QAAQ,CACf,CAAC;EAED,IAAKD,KAAK,CAACP,QAAQ,EAAG;IACrB,MAAMA,QAAQ,GAAG;IAChB;AACH;AACA;AACA;AACA;AACA;AACA;IACG;MAAEW,KAAK,EAAE,IAAAQ,QAAE,EAAE,aAAc,CAAC;MAAErB,KAAK,EAAE;IAAG,CAAC,EACzC,GAAGS,KAAK,CAACP,QAAQ,CACjB;IAED,oBACC,IAAAT,WAAA,CAAA6B,GAAA,EAACjC,WAAA,CAAAkC,aAAa;MACbV,KAAK,EAAGA,KAAO;MACfb,KAAK,EAAGA,KAAO;MACfwB,OAAO,EAAGtB,QAAU;MACpBQ,QAAQ,EAAGO,eAAiB;MAC5BQ,qBAAqB;MACrBC,uBAAuB;MACvBf,mBAAmB,EAAGA;IAAqB,CAC3C,CAAC;EAEJ;EAEA,oBACC,IAAAlB,WAAA,CAAA6B,GAAA,EAACjC,WAAA,CAAAsC,WAAW;IACXd,KAAK,EAAGA,KAAO;IACfC,WAAW,EAAGA,WAAa;IAC3Bd,KAAK,EAAGA,KAAK,aAALA,KAAK,cAALA,KAAK,GAAI,EAAI;IACrBU,QAAQ,EAAGO,eAAiB;IAC5BQ,qBAAqB;IACrBC,uBAAuB;IACvBf,mBAAmB,EAAGA;EAAqB,CAC3C,CAAC;AAEJ;AAAC,IAAAiB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc;EACdpC,IAAI;EACJK,OAAO;EACPQ;AACD,CAAC","ignoreList":[]}