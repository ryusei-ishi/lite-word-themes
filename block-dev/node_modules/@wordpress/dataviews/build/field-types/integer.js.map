{"version":3,"names":["_components","require","_element","_i18n","_jsxRuntime","sort","a","b","direction","isValid","value","context","Number","isInteger","elements","validValues","map","f","includes","Edit","data","field","onChange","hideLabelFromVision","_field$getValue","id","label","description","getValue","item","onChangeControl","useCallback","newValue","prevItem","__","jsx","SelectControl","options","__next40pxDefaultSize","__nextHasNoMarginBottom","__experimentalNumberControl","help","_default","exports","default"],"sources":["@wordpress/dataviews/src/field-types/integer.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalNumberControl as NumberControl,\n\tSelectControl,\n} from '@wordpress/components';\nimport { useCallback } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport type {\n\tSortDirection,\n\tValidationContext,\n\tDataFormControlProps,\n} from '../types';\n\nfunction sort( a: any, b: any, direction: SortDirection ) {\n\treturn direction === 'asc' ? a - b : b - a;\n}\n\nfunction isValid( value: any, context?: ValidationContext ) {\n\t// TODO: this implicitely means the value is required.\n\tif ( value === '' ) {\n\t\treturn false;\n\t}\n\n\tif ( ! Number.isInteger( Number( value ) ) ) {\n\t\treturn false;\n\t}\n\n\tif ( context?.elements ) {\n\t\tconst validValues = context?.elements.map( ( f ) => f.value );\n\t\tif ( ! validValues.includes( Number( value ) ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction Edit< Item >( {\n\tdata,\n\tfield,\n\tonChange,\n\thideLabelFromVision,\n}: DataFormControlProps< Item > ) {\n\tconst { id, label, description } = field;\n\tconst value = field.getValue( { item: data } ) ?? '';\n\tconst onChangeControl = useCallback(\n\t\t( newValue: string | undefined ) =>\n\t\t\tonChange( ( prevItem: Item ) => ( {\n\t\t\t\t...prevItem,\n\t\t\t\t[ id ]: newValue,\n\t\t\t} ) ),\n\t\t[ id, onChange ]\n\t);\n\n\tif ( field.elements ) {\n\t\tconst elements = [\n\t\t\t/*\n\t\t\t * Value can be undefined when:\n\t\t\t *\n\t\t\t * - the field is not required\n\t\t\t * - in bulk editing\n\t\t\t *\n\t\t\t */\n\t\t\t{ label: __( 'Select item' ), value: '' },\n\t\t\t...field.elements,\n\t\t];\n\n\t\treturn (\n\t\t\t<SelectControl\n\t\t\t\tlabel={ label }\n\t\t\t\tvalue={ value }\n\t\t\t\toptions={ elements }\n\t\t\t\tonChange={ onChangeControl }\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\thideLabelFromVision={ hideLabelFromVision }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<NumberControl\n\t\t\tlabel={ label }\n\t\t\thelp={ description }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChangeControl }\n\t\t\t__next40pxDefaultSize\n\t\t\thideLabelFromVision={ hideLabelFromVision }\n\t\t/>\n\t);\n}\n\nexport default {\n\tsort,\n\tisValid,\n\tEdit,\n};\n"],"mappings":";;;;;;AAGA,IAAAA,WAAA,GAAAC,OAAA;AAIA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAAqC,IAAAG,WAAA,GAAAH,OAAA;AARrC;AACA;AACA;;AAQA;AACA;AACA;;AAOA,SAASI,IAAIA,CAAEC,CAAM,EAAEC,CAAM,EAAEC,SAAwB,EAAG;EACzD,OAAOA,SAAS,KAAK,KAAK,GAAGF,CAAC,GAAGC,CAAC,GAAGA,CAAC,GAAGD,CAAC;AAC3C;AAEA,SAASG,OAAOA,CAAEC,KAAU,EAAEC,OAA2B,EAAG;EAC3D;EACA,IAAKD,KAAK,KAAK,EAAE,EAAG;IACnB,OAAO,KAAK;EACb;EAEA,IAAK,CAAEE,MAAM,CAACC,SAAS,CAAED,MAAM,CAAEF,KAAM,CAAE,CAAC,EAAG;IAC5C,OAAO,KAAK;EACb;EAEA,IAAKC,OAAO,EAAEG,QAAQ,EAAG;IACxB,MAAMC,WAAW,GAAGJ,OAAO,EAAEG,QAAQ,CAACE,GAAG,CAAIC,CAAC,IAAMA,CAAC,CAACP,KAAM,CAAC;IAC7D,IAAK,CAAEK,WAAW,CAACG,QAAQ,CAAEN,MAAM,CAAEF,KAAM,CAAE,CAAC,EAAG;MAChD,OAAO,KAAK;IACb;EACD;EAEA,OAAO,IAAI;AACZ;AAEA,SAASS,IAAIA,CAAU;EACtBC,IAAI;EACJC,KAAK;EACLC,QAAQ;EACRC;AAC6B,CAAC,EAAG;EAAA,IAAAC,eAAA;EACjC,MAAM;IAAEC,EAAE;IAAEC,KAAK;IAAEC;EAAY,CAAC,GAAGN,KAAK;EACxC,MAAMX,KAAK,IAAAc,eAAA,GAAGH,KAAK,CAACO,QAAQ,CAAE;IAAEC,IAAI,EAAET;EAAK,CAAE,CAAC,cAAAI,eAAA,cAAAA,eAAA,GAAI,EAAE;EACpD,MAAMM,eAAe,GAAG,IAAAC,oBAAW,EAChCC,QAA4B,IAC7BV,QAAQ,CAAIW,QAAc,KAAQ;IACjC,GAAGA,QAAQ;IACX,CAAER,EAAE,GAAIO;EACT,CAAC,CAAG,CAAC,EACN,CAAEP,EAAE,EAAEH,QAAQ,CACf,CAAC;EAED,IAAKD,KAAK,CAACP,QAAQ,EAAG;IACrB,MAAMA,QAAQ,GAAG;IAChB;AACH;AACA;AACA;AACA;AACA;AACA;IACG;MAAEY,KAAK,EAAE,IAAAQ,QAAE,EAAE,aAAc,CAAC;MAAExB,KAAK,EAAE;IAAG,CAAC,EACzC,GAAGW,KAAK,CAACP,QAAQ,CACjB;IAED,oBACC,IAAAV,WAAA,CAAA+B,GAAA,EAACnC,WAAA,CAAAoC,aAAa;MACbV,KAAK,EAAGA,KAAO;MACfhB,KAAK,EAAGA,KAAO;MACf2B,OAAO,EAAGvB,QAAU;MACpBQ,QAAQ,EAAGQ,eAAiB;MAC5BQ,qBAAqB;MACrBC,uBAAuB;MACvBhB,mBAAmB,EAAGA;IAAqB,CAC3C,CAAC;EAEJ;EAEA,oBACC,IAAAnB,WAAA,CAAA+B,GAAA,EAACnC,WAAA,CAAAwC,2BAAa;IACbd,KAAK,EAAGA,KAAO;IACfe,IAAI,EAAGd,WAAa;IACpBjB,KAAK,EAAGA,KAAO;IACfY,QAAQ,EAAGQ,eAAiB;IAC5BQ,qBAAqB;IACrBf,mBAAmB,EAAGA;EAAqB,CAC3C,CAAC;AAEJ;AAAC,IAAAmB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc;EACdvC,IAAI;EACJI,OAAO;EACPU;AACD,CAAC","ignoreList":[]}