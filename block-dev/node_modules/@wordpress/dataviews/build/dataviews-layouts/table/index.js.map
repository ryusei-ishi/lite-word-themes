{"version":3,"names":["_clsx","_interopRequireDefault","require","_i18n","_components","_element","_dataviewsSelectionCheckbox","_dataviewsItemActions","_constants","_dataviewsBulkActions","_columnHeaderMenu","_jsxRuntime","BulkSelectionCheckbox","selection","onChangeSelection","data","actions","getItemId","selectableItems","useMemo","filter","item","some","action","supportsBulk","isEligible","selectedItems","includes","areAllSelected","length","jsx","CheckboxControl","className","__nextHasNoMarginBottom","checked","indeterminate","onChange","map","__","TableColumn","column","fields","view","props","field","find","f","id","TableColumnField","combinedField","layout","combinedFields","TableColumnCombined","primaryField","clsx","children","render","child","direction","__experimentalHStack","spacing","__experimentalVStack","TableRow","hasBulkActions","hasPossibleBulkAction","useHasAPossibleBulkAction","isSelected","isHovered","setIsHovered","useState","handleMouseEnter","handleMouseLeave","isTouchDevice","useRef","columns","jsxs","onMouseEnter","onMouseLeave","onTouchStart","current","onClick","document","getSelection","type","itemId","style","width","default","disabled","_view$layout$styles$c","maxWidth","minWidth","styles","e","stopPropagation","ViewTable","isLoading","onChangeView","setOpenedFilter","headerMenuRefs","Map","headerMenuToFocusRef","nextHeaderMenuToFocus","setNextHeaderMenuToFocus","useSomeItemHasAPossibleBulkAction","useEffect","focus","undefined","tableNoticeId","useId","onHide","hidden","get","fallback","node","hasData","Fragment","scope","index","_view$layout$styles$c2","sort","sortValues","ref","set","delete","fieldId","toString","Spinner","_default","exports"],"sources":["@wordpress/dataviews/src/dataviews-layouts/table/index.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tCheckboxControl,\n\tSpinner,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport {\n\tuseEffect,\n\tuseId,\n\tuseRef,\n\tuseState,\n\tuseMemo,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport SingleSelectionCheckbox from '../../components/dataviews-selection-checkbox';\nimport ItemActions from '../../components/dataviews-item-actions';\nimport { sortValues } from '../../constants';\nimport {\n\tuseSomeItemHasAPossibleBulkAction,\n\tuseHasAPossibleBulkAction,\n} from '../../components/dataviews-bulk-actions';\nimport type {\n\tAction,\n\tNormalizedField,\n\tViewTable as ViewTableType,\n\tViewTableProps,\n\tCombinedField,\n} from '../../types';\nimport type { SetSelection } from '../../private-types';\nimport ColumnHeaderMenu from './column-header-menu';\n\ninterface BulkSelectionCheckboxProps< Item > {\n\tselection: string[];\n\tonChangeSelection: SetSelection;\n\tdata: Item[];\n\tactions: Action< Item >[];\n\tgetItemId: ( item: Item ) => string;\n}\n\ninterface TableColumnFieldProps< Item > {\n\tprimaryField?: NormalizedField< Item >;\n\tfield: NormalizedField< Item >;\n\titem: Item;\n}\n\ninterface TableColumnCombinedProps< Item > {\n\tprimaryField?: NormalizedField< Item >;\n\tfields: NormalizedField< Item >[];\n\tfield: CombinedField;\n\titem: Item;\n\tview: ViewTableType;\n}\n\ninterface TableColumnProps< Item > {\n\tprimaryField?: NormalizedField< Item >;\n\tfields: NormalizedField< Item >[];\n\titem: Item;\n\tcolumn: string;\n\tview: ViewTableType;\n}\n\ninterface TableRowProps< Item > {\n\thasBulkActions: boolean;\n\titem: Item;\n\tactions: Action< Item >[];\n\tfields: NormalizedField< Item >[];\n\tid: string;\n\tview: ViewTableType;\n\tprimaryField?: NormalizedField< Item >;\n\tselection: string[];\n\tgetItemId: ( item: Item ) => string;\n\tonChangeSelection: SetSelection;\n}\n\nfunction BulkSelectionCheckbox< Item >( {\n\tselection,\n\tonChangeSelection,\n\tdata,\n\tactions,\n\tgetItemId,\n}: BulkSelectionCheckboxProps< Item > ) {\n\tconst selectableItems = useMemo( () => {\n\t\treturn data.filter( ( item ) => {\n\t\t\treturn actions.some(\n\t\t\t\t( action ) =>\n\t\t\t\t\taction.supportsBulk &&\n\t\t\t\t\t( ! action.isEligible || action.isEligible( item ) )\n\t\t\t);\n\t\t} );\n\t}, [ data, actions ] );\n\tconst selectedItems = data.filter(\n\t\t( item ) =>\n\t\t\tselection.includes( getItemId( item ) ) &&\n\t\t\tselectableItems.includes( item )\n\t);\n\tconst areAllSelected = selectedItems.length === selectableItems.length;\n\treturn (\n\t\t<CheckboxControl\n\t\t\tclassName=\"dataviews-view-table-selection-checkbox\"\n\t\t\t__nextHasNoMarginBottom\n\t\t\tchecked={ areAllSelected }\n\t\t\tindeterminate={ ! areAllSelected && !! selectedItems.length }\n\t\t\tonChange={ () => {\n\t\t\t\tif ( areAllSelected ) {\n\t\t\t\t\tonChangeSelection( [] );\n\t\t\t\t} else {\n\t\t\t\t\tonChangeSelection(\n\t\t\t\t\t\tselectableItems.map( ( item ) => getItemId( item ) )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} }\n\t\t\taria-label={\n\t\t\t\tareAllSelected ? __( 'Deselect all' ) : __( 'Select all' )\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction TableColumn< Item >( {\n\tcolumn,\n\tfields,\n\tview,\n\t...props\n}: TableColumnProps< Item > ) {\n\tconst field = fields.find( ( f ) => f.id === column );\n\tif ( !! field ) {\n\t\treturn <TableColumnField { ...props } field={ field } />;\n\t}\n\tconst combinedField = view.layout?.combinedFields?.find(\n\t\t( f ) => f.id === column\n\t);\n\tif ( !! combinedField ) {\n\t\treturn (\n\t\t\t<TableColumnCombined\n\t\t\t\t{ ...props }\n\t\t\t\tfields={ fields }\n\t\t\t\tview={ view }\n\t\t\t\tfield={ combinedField }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n}\n\nfunction TableColumnField< Item >( {\n\tprimaryField,\n\titem,\n\tfield,\n}: TableColumnFieldProps< Item > ) {\n\treturn (\n\t\t<div\n\t\t\tclassName={ clsx( 'dataviews-view-table__cell-content-wrapper', {\n\t\t\t\t'dataviews-view-table__primary-field':\n\t\t\t\t\tprimaryField?.id === field.id,\n\t\t\t} ) }\n\t\t>\n\t\t\t<field.render { ...{ item } } />\n\t\t</div>\n\t);\n}\n\nfunction TableColumnCombined< Item >( {\n\tfield,\n\t...props\n}: TableColumnCombinedProps< Item > ) {\n\tconst children = field.children.map( ( child ) => (\n\t\t<TableColumn key={ child } { ...props } column={ child } />\n\t) );\n\n\tif ( field.direction === 'horizontal' ) {\n\t\treturn <HStack spacing={ 3 }>{ children }</HStack>;\n\t}\n\treturn <VStack spacing={ 0 }>{ children }</VStack>;\n}\n\nfunction TableRow< Item >( {\n\thasBulkActions,\n\titem,\n\tactions,\n\tfields,\n\tid,\n\tview,\n\tprimaryField,\n\tselection,\n\tgetItemId,\n\tonChangeSelection,\n}: TableRowProps< Item > ) {\n\tconst hasPossibleBulkAction = useHasAPossibleBulkAction( actions, item );\n\tconst isSelected = hasPossibleBulkAction && selection.includes( id );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\n\tconst handleMouseEnter = () => {\n\t\tsetIsHovered( true );\n\t};\n\tconst handleMouseLeave = () => {\n\t\tsetIsHovered( false );\n\t};\n\n\t// Will be set to true if `onTouchStart` fires. This happens before\n\t// `onClick` and can be used to exclude touchscreen devices from certain\n\t// behaviours.\n\tconst isTouchDevice = useRef( false );\n\tconst columns = view.fields || fields.map( ( f ) => f.id );\n\n\treturn (\n\t\t<tr\n\t\t\tclassName={ clsx( 'dataviews-view-table__row', {\n\t\t\t\t'is-selected': hasPossibleBulkAction && isSelected,\n\t\t\t\t'is-hovered': isHovered,\n\t\t\t\t'has-bulk-actions': hasPossibleBulkAction,\n\t\t\t} ) }\n\t\t\tonMouseEnter={ handleMouseEnter }\n\t\t\tonMouseLeave={ handleMouseLeave }\n\t\t\tonTouchStart={ () => {\n\t\t\t\tisTouchDevice.current = true;\n\t\t\t} }\n\t\t\tonClick={ () => {\n\t\t\t\tif ( ! hasPossibleBulkAction ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t! isTouchDevice.current &&\n\t\t\t\t\tdocument.getSelection()?.type !== 'Range'\n\t\t\t\t) {\n\t\t\t\t\tonChangeSelection(\n\t\t\t\t\t\tselection.includes( id )\n\t\t\t\t\t\t\t? selection.filter( ( itemId ) => id !== itemId )\n\t\t\t\t\t\t\t: [ id ]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} }\n\t\t>\n\t\t\t{ hasBulkActions && (\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"dataviews-view-table__checkbox-column\"\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\twidth: '1%',\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<div className=\"dataviews-view-table__cell-content-wrapper\">\n\t\t\t\t\t\t<SingleSelectionCheckbox\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tselection={ selection }\n\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\t\t\t\t\tgetItemId={ getItemId }\n\t\t\t\t\t\t\tprimaryField={ primaryField }\n\t\t\t\t\t\t\tdisabled={ ! hasPossibleBulkAction }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t) }\n\t\t\t{ columns.map( ( column: string ) => {\n\t\t\t\t// Explicits picks the supported styles.\n\t\t\t\tconst { width, maxWidth, minWidth } =\n\t\t\t\t\tview.layout?.styles?.[ column ] ?? {};\n\n\t\t\t\treturn (\n\t\t\t\t\t<td key={ column } style={ { width, maxWidth, minWidth } }>\n\t\t\t\t\t\t<TableColumn\n\t\t\t\t\t\t\tprimaryField={ primaryField }\n\t\t\t\t\t\t\tfields={ fields }\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tcolumn={ column }\n\t\t\t\t\t\t\tview={ view }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ !! actions?.length && (\n\t\t\t\t// Disable reason: we are not making the element interactive,\n\t\t\t\t// but preventing any click events from bubbling up to the\n\t\t\t\t// table row. This allows us to add a click handler to the row\n\t\t\t\t// itself (to toggle row selection) without erroneously\n\t\t\t\t// intercepting click events from ItemActions.\n\n\t\t\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"dataviews-view-table__actions-column\"\n\t\t\t\t\tonClick={ ( e ) => e.stopPropagation() }\n\t\t\t\t>\n\t\t\t\t\t<ItemActions item={ item } actions={ actions } />\n\t\t\t\t</td>\n\t\t\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t\t) }\n\t\t</tr>\n\t);\n}\n\nfunction ViewTable< Item >( {\n\tactions,\n\tdata,\n\tfields,\n\tgetItemId,\n\tisLoading = false,\n\tonChangeView,\n\tonChangeSelection,\n\tselection,\n\tsetOpenedFilter,\n\tview,\n}: ViewTableProps< Item > ) {\n\tconst headerMenuRefs = useRef<\n\t\tMap< string, { node: HTMLButtonElement; fallback: string } >\n\t>( new Map() );\n\tconst headerMenuToFocusRef = useRef< HTMLButtonElement >();\n\tconst [ nextHeaderMenuToFocus, setNextHeaderMenuToFocus ] =\n\t\tuseState< HTMLButtonElement >();\n\tconst hasBulkActions = useSomeItemHasAPossibleBulkAction( actions, data );\n\n\tuseEffect( () => {\n\t\tif ( headerMenuToFocusRef.current ) {\n\t\t\theaderMenuToFocusRef.current.focus();\n\t\t\theaderMenuToFocusRef.current = undefined;\n\t\t}\n\t} );\n\n\tconst tableNoticeId = useId();\n\n\tif ( nextHeaderMenuToFocus ) {\n\t\t// If we need to force focus, we short-circuit rendering here\n\t\t// to prevent any additional work while we handle that.\n\t\t// Clearing out the focus directive is necessary to make sure\n\t\t// future renders don't cause unexpected focus jumps.\n\t\theaderMenuToFocusRef.current = nextHeaderMenuToFocus;\n\t\tsetNextHeaderMenuToFocus( undefined );\n\t\treturn;\n\t}\n\n\tconst onHide = ( field: NormalizedField< Item > ) => {\n\t\tconst hidden = headerMenuRefs.current.get( field.id );\n\t\tconst fallback = hidden\n\t\t\t? headerMenuRefs.current.get( hidden.fallback )\n\t\t\t: undefined;\n\t\tsetNextHeaderMenuToFocus( fallback?.node );\n\t};\n\n\tconst columns = view.fields || fields.map( ( f ) => f.id );\n\tconst hasData = !! data?.length;\n\n\tconst primaryField = fields.find(\n\t\t( field ) => field.id === view.layout?.primaryField\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<table\n\t\t\t\tclassName=\"dataviews-view-table\"\n\t\t\t\taria-busy={ isLoading }\n\t\t\t\taria-describedby={ tableNoticeId }\n\t\t\t>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr className=\"dataviews-view-table__row\">\n\t\t\t\t\t\t{ hasBulkActions && (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tclassName=\"dataviews-view-table__checkbox-column\"\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\twidth: '1%',\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BulkSelectionCheckbox\n\t\t\t\t\t\t\t\t\tselection={ selection }\n\t\t\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\t\t\t\t\t\t\tdata={ data }\n\t\t\t\t\t\t\t\t\tactions={ actions }\n\t\t\t\t\t\t\t\t\tgetItemId={ getItemId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ columns.map( ( column, index ) => {\n\t\t\t\t\t\t\t// Explicits picks the supported styles.\n\t\t\t\t\t\t\tconst { width, maxWidth, minWidth } =\n\t\t\t\t\t\t\t\tview.layout?.styles?.[ column ] ?? {};\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\tkey={ column }\n\t\t\t\t\t\t\t\t\tstyle={ { width, maxWidth, minWidth } }\n\t\t\t\t\t\t\t\t\taria-sort={\n\t\t\t\t\t\t\t\t\t\tview.sort?.field === column\n\t\t\t\t\t\t\t\t\t\t\t? sortValues[ view.sort.direction ]\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ColumnHeaderMenu\n\t\t\t\t\t\t\t\t\t\tref={ ( node ) => {\n\t\t\t\t\t\t\t\t\t\t\tif ( node ) {\n\t\t\t\t\t\t\t\t\t\t\t\theaderMenuRefs.current.set(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfallback:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? index - 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\theaderMenuRefs.current.delete(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\tfieldId={ column }\n\t\t\t\t\t\t\t\t\t\tview={ view }\n\t\t\t\t\t\t\t\t\t\tfields={ fields }\n\t\t\t\t\t\t\t\t\t\tonChangeView={ onChangeView }\n\t\t\t\t\t\t\t\t\t\tonHide={ onHide }\n\t\t\t\t\t\t\t\t\t\tsetOpenedFilter={ setOpenedFilter }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t{ !! actions?.length && (\n\t\t\t\t\t\t\t<th className=\"dataviews-view-table__actions-column\">\n\t\t\t\t\t\t\t\t<span className=\"dataviews-view-table-header\">\n\t\t\t\t\t\t\t\t\t{ __( 'Actions' ) }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{ hasData &&\n\t\t\t\t\t\tdata.map( ( item, index ) => (\n\t\t\t\t\t\t\t<TableRow\n\t\t\t\t\t\t\t\tkey={ getItemId( item ) }\n\t\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\t\thasBulkActions={ hasBulkActions }\n\t\t\t\t\t\t\t\tactions={ actions }\n\t\t\t\t\t\t\t\tfields={ fields }\n\t\t\t\t\t\t\t\tid={ getItemId( item ) || index.toString() }\n\t\t\t\t\t\t\t\tview={ view }\n\t\t\t\t\t\t\t\tprimaryField={ primaryField }\n\t\t\t\t\t\t\t\tselection={ selection }\n\t\t\t\t\t\t\t\tgetItemId={ getItemId }\n\t\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<div\n\t\t\t\tclassName={ clsx( {\n\t\t\t\t\t'dataviews-loading': isLoading,\n\t\t\t\t\t'dataviews-no-results': ! hasData && ! isLoading,\n\t\t\t\t} ) }\n\t\t\t\tid={ tableNoticeId }\n\t\t\t>\n\t\t\t\t{ ! hasData && (\n\t\t\t\t\t<p>{ isLoading ? <Spinner /> : __( 'No results' ) }</p>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default ViewTable;\n"],"mappings":"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","ignoreList":[]}